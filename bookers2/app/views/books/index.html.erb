
<main>
<div class="container">
  <p><%= render 'books/error', model:@book %></p>

  <div class="row">
   <div class="col-md-3">
    <p><%= render 'users/user',user: @user %></p>
    <p><%= render 'books/book', book: @book %></p>
    </div>

  <div class="col-md-8 offset-md-1">
<h2>Books</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col">Title</th>
      <th scope="col">Opinion</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
<tbody>
  <% @books.each do |book| %>
  <tr>
    <td>
    <%= link_to user_path(book.user) do %>
    <%= attachment_image_tag book.user, :profile_image, size: "50x50", fallback: "no_image.jpg" %>
    <% end %>
    </td>
    <td><%= link_to book.title, book_path(book.id) %></td>
    <td><%= book.body %></td>

    <!--いいねの非同期-->
    <td id="favorites_buttons_<%= book.id %>">
      <%= render partial: 'favorites/favorite', locals: {book: book} %>
    </td>
    <!--ここまで-->

    <td><%= link_to "#{book.book_comments.count} コメント", book_path(book.id) %></td>
    </tr>

 <% end %>
  </div>
  </tr>
 </tbody>
</table>
</div>
</main>
